{"ast":null,"code":"import { Chart } from 'chart.js/auto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/kpi.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction KpiOverviewComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"pre\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.rawKpiJson);\n  }\n}\nfunction KpiOverviewComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"h3\");\n    i0.ɵɵtext(2, \"Latest Metrics\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 17)(4, \"span\");\n    i0.ɵɵtext(5, \"CI/CD Pipeline Coverage:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 17)(9, \"span\");\n    i0.ɵɵtext(10, \"Test Automation Coverage:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 17)(14, \"span\");\n    i0.ɵɵtext(15, \"MTTR:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"span\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 17)(19, \"span\");\n    i0.ɵɵtext(20, \"DevOps Score:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"span\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const kpi_r2 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\", kpi_r2.cicdPipeline, \"%\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", kpi_r2.testAutomation, \"%\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", kpi_r2.mttr, \" hours\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(kpi_r2.devOpsScore);\n  }\n}\nexport class KpiOverviewComponent {\n  get rawKpiJson() {\n    return JSON.stringify(this.kpis, null, 2);\n  }\n  constructor(kpiService) {\n    this.kpiService = kpiService;\n    this.showRawData = false;\n    this.kpis = [];\n    this.selectedNWB = 'RBRO';\n  }\n  ngOnInit() {\n    this.loadKPIs();\n  }\n  loadKPIs() {\n    this.kpiService.getKPIsByNWB(this.selectedNWB).subscribe(data => {\n      this.kpis = data;\n      console.log('Fetched KPIs:', this.kpis);\n      if (this.kpis.length > 0) {\n        console.log('Sample KPI:', this.kpis[0]);\n        console.log('Types:', {\n          deploymentFrequency: typeof this.kpis[0].deploymentFrequency,\n          changeFailureRate: typeof this.kpis[0].changeFailureRate\n        });\n      } else {\n        console.log('No KPIs returned for NWB', this.selectedNWB);\n      }\n      this.updateCharts();\n    });\n  }\n  updateCharts() {\n    const quarters = [...new Set(this.kpis.map(kpi => `${kpi.quarter} ${kpi.year}`))];\n    const deploymentData = quarters.map(q => {\n      const qKpis = this.kpis.filter(kpi => `${kpi.quarter} ${kpi.year}` === q);\n      return qKpis.reduce((sum, kpi) => sum + kpi.deploymentFrequency, 0) / qKpis.length;\n    });\n    const failureData = quarters.map(q => {\n      const qKpis = this.kpis.filter(kpi => `${kpi.quarter} ${kpi.year}` === q);\n      return qKpis.reduce((sum, kpi) => sum + kpi.changeFailureRate, 0) / qKpis.length;\n    });\n    this.createDeploymentChart(quarters, deploymentData);\n    this.createFailureRateChart(quarters, failureData);\n  }\n  createDeploymentChart(labels, data) {\n    if (this.deploymentChart) {\n      this.deploymentChart.destroy();\n    }\n    this.deploymentChart = new Chart('deploymentChart', {\n      type: 'line',\n      data: {\n        labels,\n        datasets: [{\n          label: 'Deployment Frequency',\n          data,\n          borderColor: '#4CAF50',\n          tension: 0.1\n        }]\n      },\n      options: {\n        responsive: true,\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    });\n  }\n  createFailureRateChart(labels, data) {\n    if (this.failureRateChart) {\n      this.failureRateChart.destroy();\n    }\n    this.failureRateChart = new Chart('failureRateChart', {\n      type: 'line',\n      data: {\n        labels,\n        datasets: [{\n          label: 'Change Failure Rate',\n          data,\n          borderColor: '#F44336',\n          tension: 0.1\n        }]\n      },\n      options: {\n        responsive: true,\n        scales: {\n          y: {\n            beginAtZero: true,\n            max: 100\n          }\n        }\n      }\n    });\n  }\n  onNWBChange(nwb) {\n    this.selectedNWB = nwb;\n    this.loadKPIs();\n  }\n  static {\n    this.ɵfac = function KpiOverviewComponent_Factory(t) {\n      return new (t || KpiOverviewComponent)(i0.ɵɵdirectiveInject(i1.KpiService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: KpiOverviewComponent,\n      selectors: [[\"app-kpi-overview\"]],\n      decls: 27,\n      vars: 7,\n      consts: [[1, \"kpi-overview\"], [1, \"header\"], [2, \"margin-bottom\", \"10px\", 3, \"click\"], [\"style\", \"max-height: 300px; overflow: auto; background: #f7f7f7; border: 1px solid #ccc; padding: 8px; margin-bottom: 20px;\", 4, \"ngIf\"], [1, \"nwb-selector\"], [\"for\", \"nwb\"], [\"id\", \"nwb\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"RBRO\"], [\"value\", \"RBBH\"], [1, \"charts-container\"], [1, \"chart-wrapper\"], [\"id\", \"deploymentChart\"], [\"id\", \"failureRateChart\"], [1, \"kpi-metrics\"], [\"class\", \"metric-card\", 4, \"ngFor\", \"ngForOf\"], [2, \"max-height\", \"300px\", \"overflow\", \"auto\", \"background\", \"#f7f7f7\", \"border\", \"1px solid #ccc\", \"padding\", \"8px\", \"margin-bottom\", \"20px\"], [1, \"metric-card\"], [1, \"metric\"]],\n      template: function KpiOverviewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function KpiOverviewComponent_Template_button_click_2_listener() {\n            return ctx.showRawData = !ctx.showRawData;\n          });\n          i0.ɵɵtext(3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, KpiOverviewComponent_div_4_Template, 3, 1, \"div\", 3);\n          i0.ɵɵelementStart(5, \"h1\");\n          i0.ɵɵtext(6, \"Engineering KPIs Overview\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\", 4)(8, \"label\", 5);\n          i0.ɵɵtext(9, \"Network Bank:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"select\", 6);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function KpiOverviewComponent_Template_select_ngModelChange_10_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.selectedNWB, $event) || (ctx.selectedNWB = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"change\", function KpiOverviewComponent_Template_select_change_10_listener() {\n            return ctx.onNWBChange(ctx.selectedNWB);\n          });\n          i0.ɵɵelementStart(11, \"option\", 7);\n          i0.ɵɵtext(12, \"RBRO\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"option\", 8);\n          i0.ɵɵtext(14, \"RBBH\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(15, \"div\", 9)(16, \"div\", 10)(17, \"h2\");\n          i0.ɵɵtext(18, \"Deployment Frequency\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"canvas\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 10)(21, \"h2\");\n          i0.ɵɵtext(22, \"Change Failure Rate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(23, \"canvas\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(24, \"div\", 13);\n          i0.ɵɵtemplate(25, KpiOverviewComponent_div_25_Template, 23, 4, \"div\", 14);\n          i0.ɵɵpipe(26, \"slice\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\" \", ctx.showRawData ? \"Hide\" : \"Show\", \" Raw KPI Data \");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showRawData);\n          i0.ɵɵadvance(6);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedNWB);\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(26, 4, ctx.kpis, -1));\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel, i2.SlicePipe],\n      styles: [\".kpi-overview[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  max-width: 1200px;\\n  margin: 0 auto;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 30px;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  margin: 0;\\n  color: #333;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .nwb-selector[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .nwb-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\n  padding: 8px;\\n  border-radius: 4px;\\n  border: 1px solid #ddd;\\n  font-size: 16px;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  gap: 20px;\\n  margin-bottom: 30px;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%] {\\n  background: white;\\n  padding: 20px;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  margin-top: 0;\\n  margin-bottom: 20px;\\n  color: #333;\\n  font-size: 1.2em;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%] {\\n  width: 100% !important;\\n  height: 300px !important;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .kpi-metrics[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%] {\\n  background: white;\\n  padding: 20px;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .kpi-metrics[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  margin-top: 0;\\n  margin-bottom: 20px;\\n  color: #333;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .kpi-metrics[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .metric[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  padding: 10px 0;\\n  border-bottom: 1px solid #eee;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .kpi-metrics[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .metric[_ngcontent-%COMP%]:last-child {\\n  border-bottom: none;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .kpi-metrics[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .metric[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child {\\n  color: #666;\\n}\\n.kpi-overview[_ngcontent-%COMP%]   .kpi-metrics[_ngcontent-%COMP%]   .metric-card[_ngcontent-%COMP%]   .metric[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child {\\n  font-weight: bold;\\n  color: #333;\\n}\\n\\n@media (max-width: 768px) {\\n  .kpi-overview[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%] {\\n    grid-template-columns: 1fr;\\n  }\\n  .kpi-overview[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n    gap: 15px;\\n    text-align: center;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9rcGktb3ZlcnZpZXcva3BpLW92ZXJ2aWV3LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtBQUNGO0FBQ0U7RUFDRSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0FBQ0o7QUFDSTtFQUNFLFNBQUE7RUFDQSxXQUFBO0FBQ047QUFFSTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLFNBQUE7QUFBTjtBQUVNO0VBQ0UsWUFBQTtFQUNBLGtCQUFBO0VBQ0Esc0JBQUE7RUFDQSxlQUFBO0FBQVI7QUFLRTtFQUNFLGFBQUE7RUFDQSw4QkFBQTtFQUNBLFNBQUE7RUFDQSxtQkFBQTtBQUhKO0FBS0k7RUFDRSxpQkFBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLHdDQUFBO0FBSE47QUFLTTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7RUFDQSxnQkFBQTtBQUhSO0FBTU07RUFDRSxzQkFBQTtFQUNBLHdCQUFBO0FBSlI7QUFVSTtFQUNFLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0Esd0NBQUE7QUFSTjtBQVVNO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtBQVJSO0FBV007RUFDRSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxlQUFBO0VBQ0EsNkJBQUE7QUFUUjtBQVdRO0VBQ0UsbUJBQUE7QUFUVjtBQVlRO0VBQ0UsV0FBQTtBQVZWO0FBYVE7RUFDRSxpQkFBQTtFQUNBLFdBQUE7QUFYVjs7QUFrQkE7RUFFSTtJQUNFLDBCQUFBO0VBaEJKO0VBbUJFO0lBQ0Usc0JBQUE7SUFDQSxTQUFBO0lBQ0Esa0JBQUE7RUFqQko7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi5rcGktb3ZlcnZpZXcge1xuICBwYWRkaW5nOiAyMHB4O1xuICBtYXgtd2lkdGg6IDEyMDBweDtcbiAgbWFyZ2luOiAwIGF1dG87XG5cbiAgLmhlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuXG4gICAgaDEge1xuICAgICAgbWFyZ2luOiAwO1xuICAgICAgY29sb3I6ICMzMzM7XG4gICAgfVxuXG4gICAgLm53Yi1zZWxlY3RvciB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGdhcDogMTBweDtcblxuICAgICAgc2VsZWN0IHtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuY2hhcnRzLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZ3JpZDtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gICAgZ2FwOiAyMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG5cbiAgICAuY2hhcnQtd3JhcHBlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuXG4gICAgICBoMiB7XG4gICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICBmb250LXNpemU6IDEuMmVtO1xuICAgICAgfVxuXG4gICAgICBjYW52YXMge1xuICAgICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICAgICAgICBoZWlnaHQ6IDMwMHB4ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLmtwaS1tZXRyaWNzIHtcbiAgICAubWV0cmljLWNhcmQge1xuICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcblxuICAgICAgaDMge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgcGFkZGluZzogMTBweCAwO1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTtcblxuICAgICAgICAmOmxhc3QtY2hpbGQge1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICBzcGFuOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgICBjb2xvcjogIzY2NjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNwYW46bGFzdC1jaGlsZCB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgY29sb3I6ICMzMzM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gIC5rcGktb3ZlcnZpZXcge1xuICAgIC5jaGFydHMtY29udGFpbmVyIHtcbiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgIH1cblxuICAgIC5oZWFkZXIge1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIGdhcDogMTVweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["Chart","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","rawKpiJson","ɵɵtextInterpolate1","kpi_r2","cicdPipeline","testAutomation","mttr","devOpsScore","KpiOverviewComponent","JSON","stringify","kpis","constructor","kpiService","showRawData","selectedNWB","ngOnInit","loadKPIs","getKPIsByNWB","subscribe","data","console","log","length","deploymentFrequency","changeFailureRate","updateCharts","quarters","Set","map","kpi","quarter","year","deploymentData","q","qKpis","filter","reduce","sum","failureData","createDeploymentChart","createFailureRateChart","labels","deploymentChart","destroy","type","datasets","label","borderColor","tension","options","responsive","scales","y","beginAtZero","failureRateChart","max","onNWBChange","nwb","ɵɵdirectiveInject","i1","KpiService","selectors","decls","vars","consts","template","KpiOverviewComponent_Template","rf","ctx","ɵɵlistener","KpiOverviewComponent_Template_button_click_2_listener","ɵɵtemplate","KpiOverviewComponent_div_4_Template","ɵɵtwoWayListener","KpiOverviewComponent_Template_select_ngModelChange_10_listener","$event","ɵɵtwoWayBindingSet","KpiOverviewComponent_Template_select_change_10_listener","ɵɵelement","KpiOverviewComponent_div_25_Template","ɵɵproperty","ɵɵtwoWayProperty","ɵɵpipeBind2"],"sources":["D:\\workspace\\eng-dashboard\\frontend\\src\\app\\components\\kpi-overview\\kpi-overview.component.ts","D:\\workspace\\eng-dashboard\\frontend\\src\\app\\components\\kpi-overview\\kpi-overview.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { KpiService } from '../../services/kpi.service';\nimport { KPI } from '../../models/kpi.model';\nimport { Chart } from 'chart.js/auto';\n\n@Component({\n  selector: 'app-kpi-overview',\n  templateUrl: './kpi-overview.component.html',\n  styleUrls: ['./kpi-overview.component.scss']\n})\nexport class KpiOverviewComponent implements OnInit {\n  showRawData: boolean = false;\n  get rawKpiJson(): string {\n    return JSON.stringify(this.kpis, null, 2);\n  }\n  kpis: KPI[] = [];\n  selectedNWB: string = 'RBRO';\n  deploymentChart: any;\n  failureRateChart: any;\n\n  constructor(private kpiService: KpiService) {}\n\n  ngOnInit(): void {\n    this.loadKPIs();\n  }\n\n  loadKPIs(): void {\n    this.kpiService.getKPIsByNWB(this.selectedNWB).subscribe(data => {\n      this.kpis = data;\n      console.log('Fetched KPIs:', this.kpis);\n      if (this.kpis.length > 0) {\n        console.log('Sample KPI:', this.kpis[0]);\n        console.log('Types:', {\n          deploymentFrequency: typeof this.kpis[0].deploymentFrequency,\n          changeFailureRate: typeof this.kpis[0].changeFailureRate\n        });\n      } else {\n        console.log('No KPIs returned for NWB', this.selectedNWB);\n      }\n      this.updateCharts();\n    });\n  }\n\n  updateCharts(): void {\n    const quarters = [...new Set(this.kpis.map(kpi => `${kpi.quarter} ${kpi.year}`))];\n    const deploymentData = quarters.map(q => {\n      const qKpis = this.kpis.filter(kpi => `${kpi.quarter} ${kpi.year}` === q);\n      return qKpis.reduce((sum, kpi) => sum + kpi.deploymentFrequency, 0) / qKpis.length;\n    });\n\n    const failureData = quarters.map(q => {\n      const qKpis = this.kpis.filter(kpi => `${kpi.quarter} ${kpi.year}` === q);\n      return qKpis.reduce((sum, kpi) => sum + kpi.changeFailureRate, 0) / qKpis.length;\n    });\n\n    this.createDeploymentChart(quarters, deploymentData);\n    this.createFailureRateChart(quarters, failureData);\n  }\n\n  private createDeploymentChart(labels: string[], data: number[]): void {\n    if (this.deploymentChart) {\n      this.deploymentChart.destroy();\n    }\n\n    this.deploymentChart = new Chart('deploymentChart', {\n      type: 'line',\n      data: {\n        labels,\n        datasets: [{\n          label: 'Deployment Frequency',\n          data,\n          borderColor: '#4CAF50',\n          tension: 0.1\n        }]\n      },\n      options: {\n        responsive: true,\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    });\n  }\n\n  private createFailureRateChart(labels: string[], data: number[]): void {\n    if (this.failureRateChart) {\n      this.failureRateChart.destroy();\n    }\n\n    this.failureRateChart = new Chart('failureRateChart', {\n      type: 'line',\n      data: {\n        labels,\n        datasets: [{\n          label: 'Change Failure Rate',\n          data,\n          borderColor: '#F44336',\n          tension: 0.1\n        }]\n      },\n      options: {\n        responsive: true,\n        scales: {\n          y: {\n            beginAtZero: true,\n            max: 100\n          }\n        }\n      }\n    });\n  }\n\n  onNWBChange(nwb: string): void {\n    this.selectedNWB = nwb;\n    this.loadKPIs();\n  }\n}\n","<div class=\"kpi-overview\">\n  <div class=\"header\">\n    <button (click)=\"showRawData = !showRawData\" style=\"margin-bottom: 10px;\">\n      {{ showRawData ? 'Hide' : 'Show' }} Raw KPI Data\n    </button>\n    <div *ngIf=\"showRawData\" style=\"max-height: 300px; overflow: auto; background: #f7f7f7; border: 1px solid #ccc; padding: 8px; margin-bottom: 20px;\">\n      <pre>{{ rawKpiJson }}</pre>\n    </div>\n    <h1>Engineering KPIs Overview</h1>\n    <div class=\"nwb-selector\">\n      <label for=\"nwb\">Network Bank:</label>\n      <select id=\"nwb\" [(ngModel)]=\"selectedNWB\" (change)=\"onNWBChange(selectedNWB)\">\n        <option value=\"RBRO\">RBRO</option>\n        <option value=\"RBBH\">RBBH</option>\n      </select>\n    </div>\n  </div>\n\n  <div class=\"charts-container\">\n    <div class=\"chart-wrapper\">\n      <h2>Deployment Frequency</h2>\n      <canvas id=\"deploymentChart\"></canvas>\n    </div>\n    <div class=\"chart-wrapper\">\n      <h2>Change Failure Rate</h2>\n      <canvas id=\"failureRateChart\"></canvas>\n    </div>\n  </div>\n\n  <div class=\"kpi-metrics\">\n    <div class=\"metric-card\" *ngFor=\"let kpi of kpis | slice:-1\">\n      <h3>Latest Metrics</h3>\n      <div class=\"metric\">\n        <span>CI/CD Pipeline Coverage:</span>\n        <span>{{kpi.cicdPipeline}}%</span>\n      </div>\n      <div class=\"metric\">\n        <span>Test Automation Coverage:</span>\n        <span>{{kpi.testAutomation}}%</span>\n      </div>\n      <div class=\"metric\">\n        <span>MTTR:</span>\n        <span>{{kpi.mttr}} hours</span>\n      </div>\n      <div class=\"metric\">\n        <span>DevOps Score:</span>\n        <span>{{kpi.devOpsScore}}</span>\n      </div>\n    </div>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}